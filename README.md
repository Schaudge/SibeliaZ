L-Sibelia 0.0.0
===============

Authors
=======
* Ilia Minkin (Pennsylvania State University)
* Paul Medvedev (Pennsylvania State University)

Introduction
============

This is the future development of Sibelia based on TwoPaCo and the new graph
traversal algorithm. The key difference between Sibelia is that Sibliea is
designed to produce long synteny blocks, while L-Sibelia produces shorter
blocks (locally collinear blocks). In a sense, L-Sibelia's output is similar 
to Sibelia's when it is run in a single stage. This kind of blocks can serve
as a prerequisite for whole genome alignment, or they can be chained to get
longer synteny blocks. At the same time, L-Sibelia is much faster and can 
handle longer genomes.

Compilation
===========
To compile the code, you need the following (Linux only):

* CMake 
* A GCC compiler supporting C++11
* Intel TBB library properly installed on your system. In other words, G++
  should be able to find TBB libs 

Once you've got all the things above, do the following:

* Go to the root directory of the project and create the "build" folder
* Go to the "build" directory
* Run cmake ../src
* Run make

The make run will produce the executable sibelia-pp, which is the program.

L-Sibelia Usage
===============

L-Sibelia requires two input files:

1) a FASTA file with genomes and
2) a file describing the compacted de Bruijn graph generated by TwoPaCo
 produced from the same FASTA file

To get the blocks, run the following command:

-k <k> --gfile <fasta> --infile <dbg> -m <m> -o <out_dir> -t <threads>

Description of the parameters:

1) -k : the value of k to be used

3) --gfile: the file with the input genomes

2) --infile : the output of TwoPaco. On running TwoPaCo, see its docummentation:

	<https://github.com/medvedevgroup/TwoPaCo>

TwoPaCo has to be run with the same value of k as L-Sibelia, other parameters
for TwoPaCo are irrelevant (they control TwoPaCo's speed/memory tradeoffs). The
file supplied as this parameter should be the file produced by TwoPaCo directly
(no need to run graphdump).

3) -m : the minimum size of the locally collinear block. L-Sibelia will only
output blocks longer than m basepairs.

4) -o : the directory for the output files. Currently it produces files with
the coordinates (blocks_coords.txt), sequences (blocks_sequences.fasta) and
coverage report (coverage_report.txt) as the original Sibelia does. For the
description of the formats, see:

	<https://github.com/bioinf/Sibelia/blob/master/SIBELIA.md#output-description>

GFF output and others will added soon.

5) -t : The number of thread L-Sibelia will be using. The current version has
a good parallel scalability, but it does not speed-up beyont 16 threads.

A note about the repeat masking: L-Sibelia works best when simple repeats are 
masked. Unfortunately, TwoPaCo currently does not recognize soft-masking of 
repeats (i.e. using lowercase characters), so please to convert soft-masked
repeats to hard-maksed ones (with Ns). There is a simple script for in
the util folder:

	<https://github.com/medvedevgroup/L-Sibelia/blob/master/src/util/maskn.py>